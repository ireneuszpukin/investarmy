<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Dashboard - InvestArmy</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            background-image: linear-gradient(180deg, #0d1b2a 0%, #1b2f47 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        #profile-menu {
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }
        .super-cents {
            font-size: 0.5em;
            vertical-align: super;
            margin-left: 1px;
        }
        .modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        .prize-flash {
            animation: flash 0.5s ease-in-out;
        }
        @keyframes flash {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="text-white antialiased">

    <!-- Header (Wersja dla zalogowanego u≈ºytkownika) -->
    <header id="header" class="sticky top-0 left-0 right-0 z-50 transition-all duration-300 bg-black/50 backdrop-blur-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold flex items-center gap-2">
                <span>InvestArmy</span>
                <span class="w-3 h-3 bg-orange-500 rounded-full"></span>
            </a>
             <div class="relative">
                <div id="profile-button" class="flex items-center gap-4 cursor-pointer">
                    <span class="text-sm text-gray-400 hidden sm:block">Welcome, trader-john!</span>
                    <img src="https://i.pravatar.cc/40?u=trader-john" alt="avatar" class="w-10 h-10 rounded-full border-2 border-indigo-500">
                </div>
                <!-- Dropdown Menu -->
                <div id="profile-menu" class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 opacity-0 transform scale-95 pointer-events-none">
                    <a href="profile-dashboard.html" class="block px-4 py-2 text-sm text-indigo-400">My Dashboard</a>
                    <a href="index.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">Contest</a>
                    <a href="brokers.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">Brokers</a>
                    <a href="leaderboard.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">Leaderboard</a>
                    <div class="border-t border-gray-700 my-1"></div>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">Settings</a>
                    <a href="index.html" class="block px-4 py-2 text-sm text-red-400 hover:bg-gray-700">Logout</a>
                </div>
             </div>
        </div>
    </header>

    <main>
        <section id="dashboard" class="py-12">
            <div class="container mx-auto px-4">
                <div class="lg:grid lg:grid-cols-3 lg:gap-8">
                    <!-- Left Column -->
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Welcome Message -->
                        <div>
                            <h1 class="text-4xl font-bold">Your Contest Dashboard</h1>
                            <p class="text-gray-400 mt-2">Welcome back, trader-john! Here's your performance in the <span class="font-semibold text-orange-500">Summer 2025</span> edition.</p>
                        </div>

                        <!-- Share and Earn Section -->
                        <div class="glass-card p-6 rounded-xl border-2 border-indigo-500 flex flex-col md:flex-row items-center text-center md:text-left gap-6">
                            <div class="text-6xl">üéÅ</div>
                            <div>
                                <h2 class="text-2xl font-bold">You're only $70 short of joining!</h2>
                                <p class="text-gray-400 mt-1">You already have a <span class="font-bold text-white">$30 bonus</span> from XM. Get the remaining <span class="font-bold text-white">$70</span> for free by sharing a post about our contest.</p>
                            </div>
                            <a href="share-and-earn.html" class="bg-orange-500 hover:bg-orange-400 text-white font-bold py-3 px-6 rounded-lg transition-colors whitespace-nowrap w-full md:w-auto">
                                Get $70 For Free
                            </a>
                        </div>

                        <!-- Prize Pool & Timeline -->
                        <div class="glass-card p-4 md:p-6 rounded-xl">
                            <div class="text-center">
                                <h2 class="text-xl font-bold mb-2 text-indigo-400">Current Prize Pool</h2>
                                <p id="dashboard-prize-pool" class="text-5xl font-bold text-orange-500 transition-all duration-300">$1,000+</p>
                            </div>
                            <div class="relative pt-8 mt-6 border-t border-white/10">
                                <div class="flex rounded-full bg-gray-800 h-4">
                                    <div class="w-2/3 bg-gray-600 rounded-l-full flex items-center justify-center"><span class="text-xs font-semibold text-gray-300">Pre-Contest</span></div>
                                    <div class="w-1/3 bg-indigo-600 rounded-r-full flex items-center justify-center"><span class="text-xs font-semibold text-white">Contest Month</span></div>
                                </div>
                                <div id="timeline-marker" class="absolute top-0 h-full flex flex-col items-center pt-5">
                                    <span class="text-xs text-orange-400 mb-1">Today</span>
                                    <div class="w-1 h-4 bg-orange-400 rounded-full"></div>
                                </div>
                                <div class="absolute top-6 h-6 border-l border-gray-700/50" style="left: 33.7%;"></div>
                                <div class="absolute top-6 h-6 border-l border-gray-700/50" style="left: 67.4%;"></div>
                                <div class="flex justify-between text-xs text-gray-500 mt-2">
                                    <span>July 1</span>
                                    <span>Aug 1</span>
                                    <span>Sep 1</span>
                                    <span>Sep 30</span>
                                </div>
                            </div>
                             <div class="text-center mt-4">
                                <p id="countdown-title" class="text-sm font-semibold mb-2 text-gray-400">Pre-Contest Ends In</p>
                                <div class="flex justify-center items-center space-x-2 text-xl font-mono">
                                    <span id="countdown-days">00</span>
                                    <span class="text-gray-500">:</span>
                                    <span id="countdown-hours">00</span>
                                    <span class="text-gray-500">:</span>
                                    <span id="countdown-minutes">00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Key Stats -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                            <div class="glass-card p-6 rounded-xl flex flex-col justify-center items-center text-center h-32">
                                <p class="text-gray-400 text-sm">Current Balance ($)</p>
                                <p id="current-balance" class="text-3xl font-bold mt-2">0<span class="super-cents">,00</span></p>
                            </div>
                             <div class="glass-card p-6 rounded-xl flex flex-col justify-center items-center text-center h-32">
                                <p class="text-gray-400 text-sm">Profit / Loss</p>
                                <p id="profit-loss" class="text-3xl font-bold mt-2 text-green-400">+0.00%</p>
                            </div>
                             <div class="glass-card p-6 rounded-xl flex flex-col justify-center items-center text-center h-32">
                                <p class="text-gray-400 text-sm">Current Rank</p>
                                <p class="text-3xl font-bold mt-2">#69</p>
                            </div>
                            <div class="glass-card p-6 rounded-xl flex flex-col justify-center items-center text-center h-32">
                                <p id="gap-to-leader-label" class="text-gray-400 text-sm">Gap to Leader ($)</p>
                                <p id="gap-to-leader" class="text-3xl font-bold mt-2 text-yellow-400">0<span class="super-cents">,00</span></p>
                            </div>
                        </div>
                         <!-- Balance Chart -->
                        <div class="glass-card p-4 md:p-6 rounded-xl">
                            <h2 class="text-xl font-bold mb-4">P/L Performance vs. Leader (%)</h2>
                            <div class="h-96">
                                <canvas id="balanceChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="lg:col-span-1 space-y-8 mt-8 lg:mt-0">
                         <!-- Connected Account -->
                        <div id="connected-account-box" class="glass-card p-6 rounded-xl">
                            <h2 class="text-xl font-bold mb-4">My Account</h2>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-4">
                                    <img src="https://placehold.co/40x40/000000/FFFFFF?text=XM&font=inter&bold" alt="Broker Logo" class="w-10 h-10 rounded-lg">
                                    <div>
                                        <p class="font-semibold">XM Global</p>
                                        <p class="text-xs text-gray-400">Account: 10528896</p>
                                    </div>
                                </div>
                                <button id="disconnect-btn" class="text-xs text-red-400 hover:text-red-300 font-semibold">Disconnect</button>
                            </div>
                        </div>

                        <!-- Mini Leaderboard -->
                        <div class="glass-card p-6 rounded-xl">
                            <h2 class="text-xl font-bold mb-4">Leaderboard</h2>
                            <div id="mini-leaderboard" class="space-y-4">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Community Chat -->
                        <div class="glass-card p-6 rounded-xl">
                            <h2 class="text-xl font-bold mb-4">Community Chat</h2>
                            <div class="space-y-4 max-h-96 overflow-y-auto">
                                <div class="flex items-start gap-3">
                                    <img src="https://i.pravatar.cc/32?u=CryptoKing" class="w-8 h-8 rounded-full" alt="avatar">
                                    <div>
                                        <p class="text-sm font-semibold">CryptoKing <span class="text-xs text-gray-500 ml-2">5 min ago</span></p>
                                        <p class="text-sm text-gray-300">Great job on that last trade, @trader-john!</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-3">
                                    <img src="https://i.pravatar.cc/32?u=ScalpQueen" class="w-8 h-8 rounded-full" alt="avatar">
                                    <div>
                                        <p class="text-sm font-semibold">ScalpQueen <span class="text-xs text-gray-500 ml-2">1 hour ago</span></p>
                                        <p class="text-sm text-gray-300">The market is volatile today. Good luck everyone.</p>
                                    </div>
                                </div>
                                 <div class="flex items-start gap-3">
                                    <img src="https://i.pravatar.cc/32?u=ForexMaster" class="w-8 h-8 rounded-full" alt="avatar">
                                    <div>
                                        <p class="text-sm font-semibold">ForexMaster <span class="text-xs text-gray-500 ml-2">3 hours ago</span></p>
                                        <p class="text-sm text-gray-300">Anyone watching EUR/USD?</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Confirmation Modal -->
    <div id="disconnect-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 modal-overlay opacity-0 pointer-events-none">
        <div class="glass-card p-8 rounded-xl text-center max-w-sm">
            <h2 class="text-xl font-bold mb-4">Are you sure?</h2>
            <p class="text-gray-400 mb-6">Disconnecting your account will remove it from the contest. This action cannot be undone.</p>
            <div class="flex justify-center gap-4">
                <button id="cancel-disconnect-btn" class="bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-md font-semibold transition-colors">Cancel</button>
                <button id="confirm-disconnect-btn" class="bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-md font-semibold transition-colors">Confirm</button>
            </div>
        </div>
    </div>


    <footer class="bg-black/20 border-t border-white/10 pt-16 pb-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div><h3 class="text-xl font-bold flex items-center gap-2 mb-4"><span>InvestArmy</span><span class="w-3 h-3 bg-orange-500 rounded-full"></span></h3><p class="text-gray-400">The ultimate trading contest platform for Forex & CFD traders worldwide.</p></div>
                <div><h4 class="font-semibold text-lg mb-4">Contest</h4><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white">Rules</a></li><li><a href="leaderboard.html" class="text-gray-400 hover:text-white">Leaderboard</a></li><li><a href="#" class="text-gray-400 hover:text-white">Prizes</a></li><li><a href="index.html#faq" class="text-gray-400 hover:text-white">FAQ</a></li></ul></div>
                <div><h4 class="font-semibold text-lg mb-4">Legal</h4><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white">Terms of Service</a></li><li><a href="#" class="text-gray-400 hover:text-white">Privacy Policy</a></li><li><a href="#" class="text-gray-400 hover:text-white">Risk Disclaimer</a></li></ul></div>
                <div><h4 class="font-semibold text-lg mb-4">Support</h4><ul class="space-y-2"><li><a href="#" class="text-gray-400 hover:text-white">Contact Us</a></li><li><a href="#" class="text-gray-400 hover:text-white">Help Center</a></li></div>
            </div>
            <div class="text-center text-gray-500 border-t border-white/10 pt-8">&copy; 2025 InvestArmy. All rights reserved.</div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Dropdown Menu
            const profileButton = document.getElementById('profile-button');
            const profileMenu = document.getElementById('profile-menu');

            profileButton.addEventListener('click', function(event) {
                event.stopPropagation();
                const isHidden = profileMenu.classList.contains('opacity-0');
                if (isHidden) {
                    profileMenu.classList.remove('opacity-0', 'scale-95', 'pointer-events-none');
                    profileMenu.classList.add('opacity-100', 'scale-100');
                } else {
                    profileMenu.classList.add('opacity-0', 'scale-95');
                    setTimeout(() => {
                         profileMenu.classList.add('pointer-events-none');
                    }, 200);
                }
            });
            
            document.addEventListener('click', function(event) {
                if (!profileMenu.classList.contains('opacity-0')) {
                    profileMenu.classList.add('opacity-0', 'scale-95');
                    setTimeout(() => {
                        profileMenu.classList.add('pointer-events-none');
                    }, 200);
                }
            });
            
            // Disconnect Modal Logic
            const disconnectBtn = document.getElementById('disconnect-btn');
            const modal = document.getElementById('disconnect-modal');
            const cancelBtn = document.getElementById('cancel-disconnect-btn');
            const confirmBtn = document.getElementById('confirm-disconnect-btn');
            const accountBox = document.getElementById('connected-account-box');

            disconnectBtn.addEventListener('click', () => {
                modal.classList.remove('opacity-0', 'pointer-events-none');
            });
            
            cancelBtn.addEventListener('click', () => {
                modal.classList.add('opacity-0', 'pointer-events-none');
            });

            confirmBtn.addEventListener('click', () => {
                modal.classList.add('opacity-0', 'pointer-events-none');
                accountBox.classList.add('hidden');
            });


            // Define all constants at the top
            const startDate = new Date("Jul 1, 2025 00:00:00");
            const contestStartDate = new Date("Sep 1, 2025 00:00:00");
            const contestEndDate = new Date("Sep 30, 2025 23:59:59");
            const today = new Date("Aug 15, 2025 12:00:00");

             // Prize Pool Animation
            const prizePoolEl = document.getElementById('dashboard-prize-pool');
            let currentPrize = 1000;
            const prizeInterval = setInterval(() => {
                currentPrize += Math.random() * 0.15 + 0.05;
                prizePoolEl.textContent = '+$' + currentPrize.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                prizePoolEl.classList.add('prize-flash');
                setTimeout(() => prizePoolEl.classList.remove('prize-flash'), 500);
            }, 2000);

            // Chart.js Balance Chart
            const ctx = document.getElementById('balanceChart').getContext('2d');
            
            const miniLeaderboardData = [
                { rank: 1, nickname: 'PipHunter', country: 'üá∞üá™', profit: 255.7 },
                { rank: 2, nickname: 'ForexMaster', country: 'üáßüá∑', profit: 198.2 },
                { rank: 3, nickname: 'ScalpQueen', country: 'üá≤üáæ', profit: 155.1 },
            ];

            const miniLeaderboardContainer = document.getElementById('mini-leaderboard');
            miniLeaderboardData.forEach(trader => {
                 const rankColor = trader.rank === 1 ? 'text-yellow-400' : trader.rank === 2 ? 'text-gray-300' : 'text-yellow-600';
                 miniLeaderboardContainer.innerHTML += `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="font-bold ${rankColor}">#${trader.rank}</span>
                            <img src="https://i.pravatar.cc/32?u=${trader.nickname}" class="w-8 h-8 rounded-full" alt="avatar">
                            <a href="profile-public.html" class="text-sm font-semibold hover:text-indigo-400">${trader.nickname} <span class="ml-1">${trader.country}</span></a>
                        </div>
                        <span class="text-sm font-semibold text-green-400">+${trader.profit.toFixed(2)}%</span>
                    </div>
                 `;
            });

            // Data Generation
            const labels = [];
            const userPnlUSD = [];
            const userPnlPercentData = [];
            const leaderPnlPercentData = [];
            
            let currentDate = new Date('2025-07-01');
            let userDeposit = 350; // User from myRank
            let userBalance = 350;
            
            const leaderFinalPnl = miniLeaderboardData[0].profit;
            
            let currentLeaderPnl = 0;
            while(currentDate <= contestEndDate) {
                labels.push(currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));

                const dailyPnl = (Math.random() - 0.48) * userBalance * 0.01; 
                userBalance += dailyPnl;
                const currentPnl = userBalance - userDeposit;
                userPnlUSD.push(currentPnl);
                userPnlPercentData.push((currentPnl/userDeposit)*100);

                const randomFluctuation = (Math.random() - 0.4) * 2;
                currentLeaderPnl += (leaderFinalPnl / (labels.length * 2)) + randomFluctuation;
                if (currentLeaderPnl < 0) currentLeaderPnl = 0;
                leaderPnlPercentData.push(currentLeaderPnl);

                currentDate.setDate(currentDate.getDate() + 3);
            }
            leaderPnlPercentData[leaderPnlPercentData.length - 1] = leaderFinalPnl;
            
            const finalUserBalance = userBalance;
            const finalUserPnlPercent = userPnlPercentData[userPnlPercentData.length - 1];
            const finalLeaderPnlPercent = leaderPnlPercentData[leaderPnlPercentData.length - 1];
            
            function formatCurrencyForStat(value) {
                const parts = value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}).split('.');
                const integerPart = parts[0].replace(/,/g, ' ');
                const decimalPart = parts[1];
                return `${integerPart}<span class="super-cents">,${decimalPart}</span>`;
            }

            document.getElementById('current-balance').innerHTML = formatCurrencyForStat(finalUserBalance);

            const profitLossEl = document.getElementById('profit-loss');
            profitLossEl.textContent = `${finalUserPnlPercent >= 0 ? '+' : ''}${finalUserPnlPercent.toFixed(2)}%`;
            profitLossEl.classList.toggle('text-green-400', finalUserPnlPercent >= 0);
            profitLossEl.classList.toggle('text-red-400', finalUserPnlPercent < 0);
            
            const pnlPercentDifference = finalLeaderPnlPercent - finalUserPnlPercent;
            const gapToLeaderUSD = (pnlPercentDifference / 100) * userDeposit;
            document.getElementById('gap-to-leader').innerHTML = formatCurrencyForStat(gapToLeaderUSD);


            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                    {
                        type: 'line',
                        label: 'Leader P/L',
                        data: leaderPnlPercentData,
                        borderColor: 'rgba(249, 115, 22, 0.8)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 0,
                    },
                    {
                        type: 'bar',
                        label: 'Your P/L',
                        data: userPnlPercentData,
                        backgroundColor: (context) => {
                            const value = context.dataset.data[context.dataIndex];
                            return value >= 0 ? 'rgba(74, 222, 128, 0.7)' : 'rgba(248, 113, 113, 0.7)';
                        },
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            position: 'left',
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { 
                                color: '#9ca3af',
                                callback: function(value) {
                                    return value.toFixed(0) + '%';
                                }
                            },
                            title: {
                                display: true,
                                text: 'P/L (%)',
                                color: '#9ca3af'
                            }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { 
                                color: '#9ca3af',
                                maxRotation: 0,
                                minRotation: 0,
                                autoSkip: true,
                                maxTicksLimit: 10
                            }
                        }
                    },
                    plugins: { 
                        legend: { 
                            labels: {
                                color: '#9ca3af',
                                generateLabels: function(chart) {
                                    const originalLabels = Chart.defaults.plugins.legend.labels.generateLabels(chart);
                                    originalLabels.forEach(label => {
                                        if (label.text === 'Your P/L') {
                                           const finalPnl = chart.data.datasets[1].data.slice(-1)[0];
                                           const color = finalPnl >= 0 ? 'rgba(74, 222, 128, 0.7)' : 'rgba(248, 113, 113, 0.7)';
                                           label.fillStyle = color;
                                           label.strokeStyle = color;
                                        }
                                    });
                                    return originalLabels;
                                }
                            }
                        }, 
                        tooltip: { 
                            backgroundColor: '#1f2937', 
                            titleColor: '#ffffff', 
                            bodyColor: '#ffffff', 
                            padding: 10, 
                            cornerRadius: 4,
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    
                                    const pnlPercent = context.parsed.y;
                                    label += `${pnlPercent.toFixed(2)}%`;

                                    if (context.dataset.label === 'Your P/L') {
                                        const pnlUSD = userPnlUSD[context.dataIndex];
                                        label += ` ($${pnlUSD.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})})`;
                                    }
                                    
                                    return label;
                                }
                            }
                        } 
                    }
                }
            });

            // Timeline & Countdown Logic
            const countdownTitleEl = document.getElementById('countdown-title');
            const timelineMarker = document.getElementById('timeline-marker');
            
            const totalDuration = contestEndDate.getTime() - startDate.getTime();

            const masterInterval = setInterval(function() {
                const now = new Date(); 
                let targetDate, titleText;

                if (now < contestStartDate) {
                    targetDate = contestStartDate;
                    titleText = "Pre-Contest Ends In";
                } else {
                    targetDate = contestEndDate;
                    titleText = "Contest Ends In";
                }
                
                countdownTitleEl.textContent = titleText;
                const distance = targetDate.getTime() - now.getTime();

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                
                document.getElementById("countdown-days").innerText = String(days).padStart(2, '0');
                document.getElementById("countdown-hours").innerText = String(hours).padStart(2, '0');
                document.getElementById("countdown-minutes").innerText = String(minutes).padStart(2, '0');

                const elapsed = today.getTime() - startDate.getTime();
                let progress = (elapsed / totalDuration) * 100;
                if (progress < 0) progress = 0;
                if (progress > 100) progress = 100;
                timelineMarker.style.left = `${progress}%`;

                if (distance < 0 && now > contestEndDate) {
                    clearInterval(masterInterval);
                    countdownTitleEl.textContent = "Contest Has Ended";
                }
            }, 1000);
        });
    </script>
</body>
</html>

